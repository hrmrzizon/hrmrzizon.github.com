---
layout: post
author: "Su-hyeok Kim"
comments: true
categories:
  - common
  - game
  - try
---

## Graphics?

예전부터 꽤 많은 게임들이 GPU 를 활용하는 Graphics API 를 사용하여 만들어졌다. 그래서 예전에는 직접 게임을 만드려면 Graphics API 를 사용하여 기본적인 렌더링 기능을 구현한 후에 만들어야 했었다. 단순한 2D 게임조차 말이다. 하지만 요즘은 Unity 와 Unreal Engine 4 가 게임 엔진의 쌍두마차를 이루며 게임 엔진의 기능들을 한껏 활용해 비교적 간단하고 빠르게 게임을 만든다. 그렇기에 요즘 꽤 많은 게임 프로그래머들이 Graphics API 를 직접 마주할일은 적어지고 아랫단에서 이루어지는 여러 현상들에 대해 무지해질 가능성이 매우 높아졌다. 또한 기성세대의 게임 프로그래머들은 이 현상에 대해 부정적인 의견들을 분출하고 있다.

필자 또한 현세대의 주니어 게임 프로그래머로써 Graphics API 를 직접 마주할일은 없다. 거의 모든 부분의 처리를 엔진에서 해주기 때문이다. 하지만 한계가 올때도 있다. 렌더링 성능으로 문제가 생겼을 때 이를 고칠 수 있는 사람은 당연히 기본적인 지식이 있고 이에 대해 많은 경험이 있는 사람이 고칠 수 있다. 아주 간단한 문제라도 지식이 없는 사람과 있는 사람의 차이는 질적으로나 시간적으로나 꽤 많은 차이가 난다.

간단한 예시를 들자면 일반적인 forward rendering 구조에서는 광원(lighting)이 많아질 수록 병목이 심해진다. 그래서 대부분 라이트맵, 노말맵을 활용하고 광원은 최소의 갯수로 유지하려고 한다. 하지만 이런 지식이 없는 채로 Unity 에서 간단히 light 컴포넌트를 여러개 놓고 한참 개발하다가 나중에 성능이 안나오는걸 확인 했을 때 엄청난 시간적 손실을 보게 될것이다.

한가지 예시를 더 들어보자면, GPU 는 빠른 렌더링을 위해 GPU 전용 RAM 에 정점, 텍스쳐 정보들을 저장한다. 즉 컴퓨터의 RAM 과 다른 물리적 임시 공간이 있다는 소리다. 그래서 Graphics API 를 사용해보면 여러 정보들(정점, 인덱스, uv 등)을 정보들을 참조할 때 따로 API 를 사용해 저장한다. 그런데 게임 엔진의 사용자가 변환을 통한 이동이 아닌 정점을 직접 이동시키고 싶다는 생각을 했을 때 이런 내부적인 상황을 고려하지 못한다면 잘 동작할 수도 있지만 성능이 좋지 않게 나올 수도 있다.

![app layer](/images/app_layer_by_programmers_view.jpg){: .center-image }
출처 : [Introduction to OpenGL in SlidePlayer](http://slideplayer.com/slide/8511485/){: .center }

결국 게임을 만들다보면 이런 것들에 부딫힐 수 밖에 없기 때문에 게임 프로그래머를 그만두지 않는한 결국 직면 해야한다. Graphics API 에 대한 자료들은 상당히 많기에 관련된 자료들은 배제하고 더 아래에 있는 GPU 에서 이루어지는 현상에 대해 다루는 자료를 소개해보려 한다. 위 그림의 hardware and software 단계의 "hardware" 부분의 설명들이라 보면 된다.

## 1. [Render Hell](https://simonschreibt.de/gat/renderhell/)

이 페이지는 프로그래머 입장에서 알아야할 GPU 의 동작 정보를 정리해놓은 영문 웹 페이지다. 꽤나 깔끔하고 이해를 위한 영상도 많다. 영어를 못한다면 구글 번역기와 함께 동영상을 보면서 이해하면 충분히 내용을 숙지할 수 있다. 저자는 Game Artist 로써 본인도 정리되어 있는 자료가 없기에 만들었다고 서론이 쓰여있다. 또한 이 블로그를 조금 더 살펴보면 재미있는 자료들이 꽤 있으니 잘 활용하길 바란다.

## 2. [대규모 병렬 프로세서 프로그래밍](http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&barcode=9788994774008)

2011년에 초판이 인쇄된 몇년이 지난 책이다. 하지만 이 책안의 내용은 NVidea 기준의 GPU 의 동작원리를 설명하고 CUDA 를 이해하게 해준다. 또한 한글로 번역된 책은 거의 없고, 이렇게 자세하게 내용이 적힌 책은 몇권 되지도 않는다. 게임 프로그래머로써 GPU 의 동작을 이해한다는 이 글의 범주는 약간 벗어났으나 내용을 포함하고 있기에 추천한다.

GPU 의 동작이 적혀진 자료는 많지 않다. 수요가 많은 자료도 아닐 뿐더러 지식들의 가치도 높기 때문이다. 그래서 이 글을 지속적으로 업데이트를 할 예정이다. 자료를 모으는 용도도 있지만 제일 중요한건 필자도 지식이 별로 없는 편이라 공부 용도로 쓸려고 한다.

## 3. [Life of triangle](https://developer.nvidia.com/content/life-triangle-nvidias-logical-pipeline)

NVidea 공식 블로그 홈페이지에 올라온 글이다. NVidea GPU Architecture 들과 함께 폴리곤 하나가 어떻게 그려지는지에 대해 쓰여져 있는 간단한 글타래다. 이 사이트 역시 꽤 많은 글들이 올라와 있으니 궁금할때 보면 좋을 듯 하다.

- [개인 블로그 링크](http://pixeljetstream.blogspot.kr/2015/02/life-of-triangle-nvidias-logical.html) : 같은 글이 있다. 검은색 배경/흰 글씨를 선호하면 여기서 보면된다.
